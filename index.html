<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Travel Planner Pro</title>

<style>
body{margin:0;font-family:Arial;background:#eef1f7}
header{background:#0d47a1;color:white;padding:15px;text-align:center;font-size:22px}
.container{max-width:900px;margin:auto;padding:20px}
input,button{width:100%;padding:10px;margin:8px 0;font-size:15px;border-radius:6px;border:1px solid #ccc}
button{background:#0d47a1;color:white;border:none;cursor:pointer}
button:hover{opacity:0.9}
.card{background:white;padding:15px;margin-top:20px;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,0.1)}
.section-title{font-size:18px;font-weight:bold;margin-top:10px}
.hidden{display:none}
.total{font-size:20px;font-weight:bold;margin-top:10px}
</style>
</head>

<body>

<header>Easy Travel Planner — Precio según Demanda Real</header>

<!-- PANTALLA 1 -->
<div class="container" id="pantalla1">

<h3>Planifica tu viaje</h3>

<input type="text" id="origen" placeholder="Desde dónde sales">
<input type="text" id="destino" placeholder="Destino">
<input type="date" id="fechaSalida">
<input type="number" id="dias" placeholder="Número de días">
<input type="number" id="personas" placeholder="Número de personas">

<button onclick="generarViaje()">Generar Viaje</button>

</div>

<!-- PANTALLA 2 -->
<div class="container hidden" id="pantalla2">

<h2 id="tituloViaje"></h2>
<div id="resultado"></div>

<button onclick="volver()">← Volver</button>

</div>

<script>

// Normalizar texto
function normalizar(text){
return text.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();
}

// ===================== ACTIVIDADES REALES =====================

const actividades = {

roma:[
"9:00-10:30 Coliseo",
"11:00-12:30 Foro Romano",
"14:00-16:00 Vaticano",
"17:00-18:00 Plaza de España",
"20:00 Cena en Trastevere"
],

paris:[
"9:00-11:00 Torre Eiffel",
"11:30-14:00 Museo Louvre",
"16:00-17:30 Catedral Notre Dame",
"19:00 Crucero por el Sena"
],

"nueva york":[
"9:00 Estatua de la Libertad",
"12:00 Central Park",
"15:00 Museo MET",
"19:00 Times Square"
],

tokio:[
"9:00 Templo Senso-ji",
"12:00 Mercado Tsukiji",
"15:00 Cruce Shibuya",
"19:00 Barrio Shinjuku"
],

madrid:[
"9:30 Museo del Prado",
"12:00 Palacio Real",
"16:00 Parque del Retiro",
"20:00 Ruta de tapas"
]

};

// ===================== TEMPORADA POR CIUDAD =====================

function multiplicadorTemporada(destino,fecha){

let mes = new Date(fecha).getMonth()+1;

destino = normalizar(destino);

// ROMA
if(destino==="roma"){
if([5,6,7,8,9].includes(mes)) return 1.4;
if([3,4,10].includes(mes)) return 1.1;
return 0.9;
}

// PARIS
if(destino==="paris"){
if([6,7,8,9].includes(mes)) return 1.35;
if([4,5,10].includes(mes)) return 1.1;
return 0.95;
}

// NUEVA YORK
if(destino==="nueva york"){
if([6,7,8,12].includes(mes)) return 1.5;
if([4,5,9,10].includes(mes)) return 1.15;
return 0.9;
}

// TOKIO
if(destino==="tokio"){
if([3,4,10].includes(mes)) return 1.45;
if([5,9].includes(mes)) return 1.15;
return 0.85;
}

// MADRID
if(destino==="madrid"){
if([4,5,6,9].includes(mes)) return 1.3;
if([3,10].includes(mes)) return 1.1;
return 0.9;
}

return 1;
}

// ===================== GENERAR VIAJE =====================

function generarViaje(){

let origen=document.getElementById("origen").value;
let destinoOriginal=document.getElementById("destino").value;
let destino=normalizar(destinoOriginal);
let fecha=document.getElementById("fechaSalida").value;
let dias=parseInt(document.getElementById("dias").value);
let personas=parseInt(document.getElementById("personas").value);

if(!origen||!destino||!fecha||!dias||!personas){
alert("Completa todos los campos");
return;
}

// BASES REALISTAS MEDIAS
let hotelBase=130;
let comidaBase=50;
let actividadBase=45;
let transporteBase=25;
let vueloBase=300;

// Aplicar temporada específica
let mult=multiplicadorTemporada(destino,fecha);

hotelBase*=mult;
actividadBase*=mult;
vueloBase*=mult;

let totalHotel=hotelBase*dias*personas;
let totalComida=comidaBase*dias*personas;
let totalActividades=actividadBase*dias*personas;
let totalTransporte=transporteBase*dias*personas;
let totalVuelo=vueloBase*personas;

let totalViaje=totalHotel+totalComida+totalActividades+totalTransporte+totalVuelo;

// Generar itinerario
let html="";

for(let i=1;i<=dias;i++){

html+=`<div class="card">
<div class="section-title">Día ${i}</div>`;

if(actividades[destino]){
actividades[destino].forEach(act=>{
html+=`<p>${act}</p>`;
});
}else{
html+=`
<p>9:00 Tour por el centro histórico</p>
<p>12:00 Museo principal</p>
<p>17:00 Barrio emblemático</p>
<p>20:00 Cena local</p>
`;
}

html+=`</div>`;
}

// Cambiar pantalla
document.getElementById("pantalla1").classList.add("hidden");
document.getElementById("pantalla2").classList.remove("hidden");

document.getElementById("tituloViaje").innerHTML=
`Viaje ${origen} → ${destinoOriginal} (${dias} días)`;

document.getElementById("resultado").innerHTML=
html+`
<div class="card">
<h3>Presupuesto según demanda estacional</h3>
<p>Multiplicador aplicado: x${mult}</p>
<p>Vuelo: €${Math.round(totalVuelo)}</p>
<p>Hotel: €${Math.round(totalHotel)}</p>
<p>Comida: €${Math.round(totalComida)}</p>
<p>Actividades: €${Math.round(totalActividades)}</p>
<p>Transporte: €${Math.round(totalTransporte)}</p>
<p class="total">TOTAL ESTIMADO: €${Math.round(totalViaje)}</p>
</div>
`;

}

function volver(){
document.getElementById("pantalla2").classList.add("hidden");
document.getElementById("pantalla1").classList.remove("hidden");
}

</script>

</body>
</html>
