<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Travel Agency</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f6fa}
header{background:black;color:white;padding:15px;text-align:center;font-size:22px}
.container{max-width:700px;margin:auto;padding:20px}
input,select,button{width:100%;padding:10px;margin:8px 0;font-size:15px}
button{background:black;color:white;border:none;cursor:pointer}
.card{background:white;padding:15px;margin-top:20px;border-radius:6px;box-shadow:0 4px 8px rgba(0,0,0,0.1)}
.total{font-size:18px;font-weight:bold;margin-top:10px}
</style>
</head>

<body>

<header>Easy Travel Agency</header>

<div class="container">

<h3>Planificador Profesional de Viajes</h3>

<input type="text" id="destino" placeholder="Destino (cualquier ciudad del mundo)">
<input type="number" id="dias" placeholder="N√∫mero de d√≠as">
<input type="number" id="personas" placeholder="N√∫mero de pasajeros">

<select id="tipo">
<option value="romantico">Rom√°ntico</option>
<option value="aventura">Aventura</option>
<option value="familiar">Familiar</option>
<option value="cultural">Cultural</option>
</select>

<select id="presupuesto">
<option value="bajo">Presupuesto Bajo</option>
<option value="medio">Presupuesto Medio</option>
<option value="alto">Presupuesto Alto</option>
</select>

<label>Margen de beneficio (%)</label>
<input type="number" id="margen" value="20">

<label>
<input type="checkbox" id="modoAgencia">
 Mostrar datos internos de agencia
</label>

<button onclick="generarViaje()">Generar Plan</button>
<button onclick="exportarPDF()">Exportar PDF Profesional</button>

<div id="resultado"></div>

</div>

<script>

// ================= ACTIVIDADES UNIVERSALES =================

const actividadesBase = {

romantico:[
"Tour panor√°mico al atardecer",
"Cena gourmet local",
"Paseo hist√≥rico por el centro",
"Mirador rom√°ntico con vistas",
"Experiencia cultural exclusiva"
],

aventura:[
"Ruta de senderismo",
"Excursi√≥n natural guiada",
"Actividad deportiva local",
"Exploraci√≥n de zona monta√±osa",
"Experiencia acu√°tica o outdoor"
],

familiar:[
"Parque tem√°tico o recreativo",
"Visita interactiva cultural",
"Actividad educativa local",
"Tour guiado familiar",
"Espacio natural adaptado"
],

cultural:[
"Museo principal de la ciudad",
"Centro hist√≥rico guiado",
"Monumento emblem√°tico",
"Mercado tradicional",
"Evento cultural o espect√°culo local"
]

};

// ================= GENERAR VIAJE =================

function generarViaje(){

let destino=document.getElementById("destino").value;
let dias=parseInt(document.getElementById("dias").value);
let personas=parseInt(document.getElementById("personas").value);
let tipo=document.getElementById("tipo").value;
let presupuesto=document.getElementById("presupuesto").value;

if(!destino || !dias || !personas){
alert("Completa todos los campos");
return;
}

// COSTES BASE
let hotel, comida, actividadesCoste, transporte;

if(presupuesto==="bajo"){
hotel=60; comida=25; actividadesCoste=20; transporte=15;
}else if(presupuesto==="medio"){
hotel=120; comida=45; actividadesCoste=35; transporte=25;
}else{
hotel=250; comida=80; actividadesCoste=60; transporte=40;
}

let alojamientoTotal=hotel*dias;
let comidaTotal=comida*dias;
let actividadesTotal=actividadesCoste*dias;
let transporteTotal=transporte*dias;

let totalPersona=alojamientoTotal+comidaTotal+actividadesTotal+transporteTotal;
let totalViaje=totalPersona*personas;

// MARGEN
let margen=parseInt(document.getElementById("margen").value)/100;
let beneficioTotal=totalViaje*margen;
let precioFinalViaje=totalViaje+beneficioTotal;
let precioFinalPersona=precioFinalViaje/personas;

let mostrarInterno=document.getElementById("modoAgencia").checked;

// GENERADOR UNIVERSAL
let itinerario="";
let actividadesLista=actividadesBase[tipo];

for(let i=1;i<=dias;i++){
let actividad=actividadesLista[(i-1)%actividadesLista.length];
itinerario+=`
<p><strong>D√≠a ${i}:</strong> ${actividad} en ${destino}.</p>
`;
}

// RESULTADO
let resumen=`
<div class="card">
<h3>Itinerario en ${destino}</h3>
${itinerario}
</div>

<div class="card">
<h3>Resumen Econ√≥mico</h3>
<p>üè® Alojamiento: ‚Ç¨${alojamientoTotal}</p>
<p>üçΩ Comidas: ‚Ç¨${comidaTotal}</p>
<p>üéü Actividades: ‚Ç¨${actividadesTotal}</p>
<p>üöï Transporte: ‚Ç¨${transporteTotal}</p>
<p class="total">Precio final por persona: ‚Ç¨${precioFinalPersona.toFixed(2)}</p>
<p class="total">Precio final total (${personas} personas): ‚Ç¨${precioFinalViaje.toFixed(2)}</p>
</div>
`;

if(mostrarInterno){
resumen+=`
<div class="card" style="background:#fff3cd">
<h4>Datos internos agencia</h4>
<p>Coste real total: ‚Ç¨${totalViaje.toFixed(2)}</p>
<p>Beneficio estimado: ‚Ç¨${beneficioTotal.toFixed(2)}</p>
</div>
`;
}

document.getElementById("resultado").innerHTML=resumen;

}

// ================= PDF PROFESIONAL =================

function exportarPDF(){

const { jsPDF } = window.jspdf;
const doc = new jsPDF();

let destino=document.getElementById("destino").value;
let dias=document.getElementById("dias").value;
let personas=document.getElementById("personas").value;
let fecha=new Date().toLocaleDateString();
let referencia="ET-"+Math.floor(Math.random()*100000);

doc.setFillColor(0,0,0);
doc.rect(0,0,210,60,"F");

doc.setTextColor(255,255,255);
doc.setFontSize(28);
doc.text("Easy Travel Agency",20,35);

doc.setFontSize(14);
doc.text("Propuesta Personalizada",20,50);

doc.setTextColor(0,0,0);
doc.setFontSize(12);
doc.text("Referencia: "+referencia,20,75);
doc.text("Fecha: "+fecha,20,85);

doc.addPage();
doc.setFontSize(18);
doc.text("Detalles del Viaje",20,20);
doc.setFontSize(12);
doc.text("Destino: "+destino,20,35);
doc.text("Duraci√≥n: "+dias+" d√≠as",20,45);
doc.text("Pasajeros: "+personas,20,55);

doc.addPage();
doc.setFontSize(16);
doc.text("Gracias por confiar en Easy Travel Agency",20,40);

doc.save("EasyTravel_Propuesta.pdf");
}

</script>

</body>
</html>
